<html>
  <head>
    <title>Da Boate Azul para a Casa das Primas - uma análise comparativa das letras sertanejas</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=1000, shrink-to-fit=yes">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css"/>
    <!-- Link Swiper's CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.7/css/swiper.min.css">



  </head>

  <!-- Tooltip div is only called in when user click in item on the scatterplot -->
  <div id="tooltip"></div>

<body>

  <div class="banner">
    <span>
      <h2>Da Boate Azul para a Casa das Primas</h2>
      <h4>uma análise comparativa das letras sertanejas</h4>
      <p><b>por Rodrigo Menegat</b></br></p>
    </span>
  </div>

  <div id="lead" class="highlight-text-block-orange">
    <p>Não é preciso ouvir mais do que cinco minutos de rádio para descobrir que a música sertaneja se transformou desde que a geração ‘universitária’ de Michel Teló e Luan Santana começou a emplacar hits em série. Há pouquíssima semelhança entre as notas de viola de “Chico Mineiro”, primeiro grande sucesso de Tonico e Tinoco, e “Vidinha de Balada”, música grudenta de Henrique e Juliano. Milionário e José Rico não lembram nem um pouco a onda ‘funkneja’ iniciada por artistas como Cacio e Marcos.</p>
  </div>

  <div id="sublead" class="highlight-text-block-purple">
    <p>O ritmo, porém, não foi a única coisa que mudou. Na transição entre manhãs na lavoura e noites de pegação, os temas sobre os quais o sertanejo canta também se alteraram. Mas como exatamente essa transformação aconteceu? Para descobrir, a piauí analisou mais de 8000 letras de 99 artistas. Essa análise mostra como fomos da Boate Azul para a Casa das Primas.</p>
  </div>  


  <div id="chart-1" class="chart-block-white"></div>

  <div class="text-block">

    <p>Uma maneira de descobrir quais são os temas importantes para um artista é contar palavras. Se um cantor usa várias vezes o termo ‘carro’, por exemplo, podemos assumir que automóveis são um assunto relevante na sua obra. O mesmo vale para gêneros musicais: se, no conjunto das músicas que analisamos, determinada expressão é muito repetida, isso significa que o gênero musical como um todo se preocupa bastante com tal conceito.</p>

    <p>No gráfico acima, mostramos quais são as palavras mais comuns no sertanejo – em todo o estilo, independentemente do subgênero. Nada muito surpreendente: 'amor' é de longe o termo mais usado, aparecendo em uma frequência de 219 vezes a cada 10 mil palavras. Para confirmar a vocação romântica da música, o segundo lugar fica com 'coração'.</p>

    <p>Isso é interessante, mas nem tanto. O que realmente queremos saber é como esses temas mudaram desde que duplas como João Bosco e Vinícius e Jorge e Mateus começaram a transformar o sertanejo naquilo que é hoje. Para isso, precisamos descobrir quais palavras costumam aparecer com frequência no sertanejo das antigas, mas nem tanto no atual.</p>

</div>

  <div id="table-holder">
    <div id='chart-2', class="chart-block-white-left"></div>
    <div id='chart-3', class="chart-block-white-right"></div>
  </div>

  <div class="text-block">

  <p>As tabelas mostram quais são as palavras mais características de cada um dos gêneros - ou seja, quais são as palavras que aparecem mais vezes no sertanejo tradicional em comparação com o sertanejo universitário e vice-versa.</p>

  <p>Nessa comparação, agrupamos todos os artistas que não tocam sertanejo universitário sob o rótulo "tradicional". Cascatinha e Inhana são certamente diferentes de Rick e Renner, mas o objetivo aqui é mensurar o quão distante a nova geração é de todo o resto. A matemática que usamos para isso é simples e direta: calculamos quantas vezes a cada dez mil termos uma palavra aparece em cada estilo e dividimos um valor pelo outro.</p>

  <p>Alguns padrões começam a aparecer: termos como "campos" e "caboclo" são praticamente exclusivos do sertanejo tradicional. As palavras mais características do sertanejo universitário costumam ocorrer menos vezes, provavelmente bordões repetidos em apenas um punhado de músicas. Entretanto, o termo "balada" é bastante representativo do estilo e aparece mais de 15 vezes a cada 10 mil palavras.</p>

  <p>Essa lista, porém, se limita a mostrar as vinte palavras mais centrais de cada gênero. Nós queremos dar uma olhada em todas elas.</p>
</div>

  <!-- Chart-4: interactive canvas chart -->
  <div id="chart-4" class="chart-block-white"></div>

  <div class="text-block">
    <p>No gráfico acima, cada círculo representa uma palavra que foi usada pelo menos uma vez nas letras que analisamos. Ele está divido em duas metades: quanto mais para a esquerda, mais uma palavra aparece no sertanejo tradicional em comparação com o universitário. Quanto mais para a direita, acontece o contrário: a palavra é mais típica do sertanejo contemporâneo. No meio dessa bagunça é difícil visualizar qualquer padrão, entretanto. Vamos dar uma olhada em um grupo específico de palavras de cada vez.</p>
</div>

<!-- Scrolling template -->
  <div id="scrolly-container" class="container">
    <div class="row">
      <div class="col-sm-4">
        <div class="step" id="first-step" style="height: 400px;">
          <p>Parece que até mesmo a maneira como sertanejos do passado e do presente bebem é diferente. "Cachaça" é uma palavra que aparece mais nas músicas tradicionais. Já cerveja é algo mais universitário. Entretanto, pelo jeito, universitário mesmo é ir para a balada.</p>
        </div>
        <div class="step" id="second-step" style="height: 400px;">
          <p>A maneira como os músicos falam de mulheres e de amor também revela contrastes. As referências a "esposa" são quase 40 vezes mais comuns no sertanejo tradicional. Do outro lado do espectro, estão "gatinha", "solteiro" e "pegador".</p>
        </div>
        <div class="step" id="third-step" style="height: 400px;">
          <p>As menções à vida rural, em teoria a essência do estilo, são características do sertanejo tradicional, mas nem tanto do sertanejo universitário. "Caboclo", a palavra mais tradicional de acordo com nossos critérios, é típica de letras de Tonico e Tinoco, por exemplo.</p>
        </div>
      </div>
      <!-- TO DO: Implement change on scrolling -->
      <div class="col-sm-8">
        <!-- Charts 5 to 7: static canvas charts -->
        <div id="chart-5" class="chart-block-white"></div>
        <div id="chart-6" class="chart-block-white"></div>
        <div id="chart-7" class="chart-block-white"></div>
      </div>
    </div>
  </div>

  <div class="text-block">
    <p>Agora que conhecemos as palavras que definem cada um dos gêneros, vamos dar uma olhada nos temas que estão mais presentes nas letras de cada artista. Nós poderíamos aplicar a mesma técnica que usamos na análise anterior, ou seja, dividir o número de vezes que uma palavra é usada por um artista pelo número de vezes que é usada no geral.</p>

    <p>Entretanto, optamos por fazer isso de maneira mais ágil, usando técnicas de processamento de linguagem natural - um ramo da ciência da computação que, para resumir grosseiramente, se preocupa em estudar a estrutura da linguagem humana e tenta representa-la na forma de modelos estatísticos e algoritmos.</p>

    <p>No caso, vamos fazer uma análise chamada tf-idf: term frequency-inverse document frequency. Ela compara quantas vezes determinado termo aparece em um documento - ou, no caso, nas letras de um artista - e na soma de todos os documentos. Assim, uma palavra como “amor” ou “coração”, que é muito comum em todas as composições, é considerada menos central do que um termo como “caboclo” para as letras de Tonico e Tinoco, já que esse último termo, apesar de aparecer menos vezes em uma contagem absoluta, é mais característico da dupla.</p>
  </div>

  <!-- A swiper/slideshow element that displays the artists and their most central words -->
  <!-- Swiper -->
  <div class="swiper-container">
      <h2> As palavras mais centrais de cada artista </h2>
      <b> Arraste para ver músicos diferentes </b>
    <div id='chart-9' class="swiper-wrapper">
      <!-- elements added dinamycally using chart-9.js script -->
    </div>
    <!-- Add Arrows -->
    <div class="swiper-button-next"></div>
    <div class="swiper-button-prev"></div>
  </div>
  <!-- End of swiper -->

<!-- SECOND SCROLLY-THING -->

  <div class="text-block">
    <p>Com a lista de palavras mais comuns de cara artista em mãos, podemos descobrir outro aspecto interessante: quais músicos cantam sobre temas parecidos? Outra métrica usada com frequência em análises textuais se chama "similaridade de cossenos". Apesar do nome que remete a aulas de geometria do ensino médio, é possível explicar superficialmente o que isso significa sem muita complicação: um algoritmo compara duas séries de palavras e, de acordo com quantas delas se repetem, determina o quão parecidos dois textos são.</p>

    <p>Nós usamos essa técnica para calcular a similaridade entre a lista de cinco palavras mais centrais de cada artista e, assim, descobrimos quem dá ênfase para os mesmos temas em suas letras. Depois, passamos o resultado para outro algoritmo de machine-learning, esse chamado t-SNE: t-Distributed Stochastic Neighbor Embedding.</p>

    <p>O nome é complexo e o processo também, mas para simplificar, podemos dizer que o computador analisa todas as similaridades e discrepâncias entre os pares de artistas para encontrar a maneira mais adequada de posicioná-los em um plano, de modo que músicos com um vocabulário parecido fiquem perto uns dos outros. Trata-se de uma aproximação mas, ainda assim, podemos explorar visualmente quem canta sobre temas próximos.</p>
  </div>

  <!-- Scrolling template -->
    <div id="scrolly-container" class="container">
      <div class="row">
          <div class="col-sm-4">
            <div id="fourth-step" class="step">
              <p>Para começar, vamos adicionar um círculo que representa a mais tradicional das duplas sertanejas: Tonico e Tinoco.</p>
            </div>
            <div id="fifth-step" class="step">
              <p>Agora, vamos adicionar alguns outros artistas de sertanejo raiz. Primeiro, Cascatinha e Inhana. Perceba que as duas duplas ficam perto: isso significa que elas cantam sobre temas parecidos, de acordo com nossa análise de palavras centrais.</p>
            </div>
            <div id="sixth-step" class="step">
              <p>Os outros artistas do sertanejo de raiz também ficam próximos, formando um grupo no canto direito. Na extrema-esquerda, Gino e Geno destoam, assim como Amado e Antônio, em cima e no centro.</p>
            </div>
            <div id="seventh-step" class="step">
              <p>A partir de agora, vamos adicionar músicos da geração intermediária, que sucedeu o sertanejo mais tradicional e levou o gênero ao sucesso nos anos 70, 80 e 90. Talvez os primeiros representantes dessa safra tenham sido Milionário e José Rico, então começamos por eles, que ficam em uma posição central no gráfico.</p>
            </div>
            <div id="eigth-step" class="step">
              <p>Outros clássicos são Chitãozinho e Xororó e Zezé di Camargo e Luciano. A primeira dupla fica mais perto dos representantes do sertanejo raiz, enquanto Zezé Di Camargo e Luciano foram posicionados no canto esquerdo, ainda pouco povoado.</p>
            </div>
            <div id="ninth-step" class="step">
              <p>Antes de irmos para o sertanejo universitário, vamos adicionar os outros músicos do sertanejo tradicional.</p>
            </div>
            <div id="tenth-step" class="step">
              <p>Embora, na análise, tenhamos colocado todos os artistas do sertanejo atual dentro do balde 'universitário', eles são bastante diferentes entre si. Para ilustrar, vamos adicionar ao gráfico um punhado de artistas de cada vez. Primeiro, aqueles que são considerados um dos pioneiros do estilo: Jorge e Mateus.</p>
            </div>
            <div id="eleventh-step" class="step">
              <p>Na mesma toada, podemos adicionar outros músicos que ajudaram a definir o gênero: Fernando e Sorocaba e João Bosco e Vinícius.</p>
            </div>
            <div id="twelth-step" class="step">
              <p>Agora, onde ficam os responsáveis por colocar o sertanejo universitário nas paradas nacionais, como Luan Santana, Michel Teló e Gusttavo Lima?</p>
            </div>
            <div id="thirteenth-step" class="step">
              <p>E as artistas do 'feminejo universitário', como Maiara e Maraisa, Simone e Simaria, Naiara Azevedo, Paula Fernandes e Marília Mendonça?</p>
            </div>
            <div id="fourteenth-step" class="step">
              <p>Finalmente, podemos adicionar todo o resto. Perceba como o sertanejo universitário se espalha do centro para a esquerda, em outro conglomerado.</p>
            </div>
          </div>
          <div class="col-sm-8">
            <div id="chart-8" class="sticky"></div>
        </div>
      </div>
    </div>

  <!-- End of scroll. Beggining final, fixed chart -->
  <div class="banner">
    <div id="chart-10"></div>
    <div id="chart-10-infobox-title" class="infobox-title">
      <h3> Selecione um artista </h3>
    </div>
    <div id="chart-10-infobox" class="infobox"></div>
  </div>
  
  <!-- Space in the bottom -->
  <footer></footer>

  <!-- This is D3, our graphing library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.2/d3.min.js"></script>

  <!-- include our scrolling library -->
  <script src='https://unpkg.com/scrollama'></script>
  <script src='stickyfill.min.js'></script>

   <!-- Include our scrolling library -->
   <script src='https://unpkg.com/scrollama'></script>
   <!-- Allows sticky implementation of scrollytelling -->
   <script src='stickyfill.min.js'></script>
   <script>
    /* Allow position: sticky to work in old browsers */
    var elements = document.querySelectorAll('.sticky');
    Stickyfill.add(elements);

    // instantiate the scrollama
    var scroller = scrollama();

    scroller
      .setup({
        offset: 0.55, // how far from the top?
        step: '.step', // class for stepping through
        debug: false, // shows the line
        container: 'container'
      })
      .onStepEnter(function(response) {
        // trigger the stepin event
        d3.select(response.element).dispatch('stepin')
        console.log("FIRED STEPIN")
        // add highlight when entering a step
        //d3.select(response.element).classed('active', true)
      })
      .onStepExit(function(response) {
        // trigger the stepout event
        d3.select(response.element).dispatch('stepout')
        console.log("FIRED STEPOUT")
        // remove highlight when exiting a step
        //d3.select(response.element).classed('active', false)
      })
  </script>

  <!-- A swiper utility-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.7/js/swiper.min.js"></script>

  <!-- This is D3, our graphing library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.2/d3.min.js"></script>
  <!-- This is an annotation add-on-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-annotation/2.1.0/d3-annotation.min.js"></script>
  <!-- This will load the tooltips-->
  <script src="d3-tip.js"></script>

  <!-- Now we include our actual visualization -->
  <script src="./general-words/chart-1.js"></script>
  <script src="./words-by-style/chart-2.js"></script>
  <script src="./words-by-style/chart-3.js"></script>
  <script src="./words-by-style/chart-4.js"></script>
  <script src="./words-by-style/chart-5.js"></script>
  <script src="./words-by-style/chart-6.js"></script>
  <script src="./words-by-style/chart-7.js"></script>
  <script src="./similar-artists/chart-8-steps.js"></script>
  <script src="./words-by-artist/chart-9.js"></script>
  <script src="./similar-artists/chart-10.js"></script>


</body>
</html>